<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
    <title>JD-Demo-mainpage</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="./style/base.css">
    <link rel="stylesheet" href="./style/index.css">
</head>

<body>

<!--the whole layout of the page-->
<div class="jd_layout">
    <!--the header of the mainpage-->
    <header class="jd_header">
        <div class="jd_header_box">
            <a href="#" class="icon_logo"></a>
            <form action="#">
                <span class="icon_search"></span>
                <input type="search" placeholder="Search">
            </form>
            <a href="#" class="login">Login</a>
        </div>

    </header>

    <!--the carousel figure of banner-->
    <div class="jd_banner">
        <!--the banner pics-->
        <ul>
            <li><a href="#"><img src="./images/l8.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l1.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l2.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l3.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l4.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l5.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l6.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l7.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l8.jpg" alt=""></a></li>
            <li><a href="#"><img src="./images/l1.jpg" alt=""></a></li>
        </ul>

        <!--the nav of pics-->
        <ul>
            <li class="now"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

    <!--the navigation of mainpage-->
    <nav class="jd_nav">
        <ul class="clearfix">
            <li><a><img src="./images/nav0.png" alt=""><p>Classify</p></a></li>
            <li><a><img src="./images/nav1.png" alt=""><p>Transport</p></a></li>
            <li><a><img src="./images/nav2.png" alt=""><p>Trolley</p></a></li>
            <li><a><img src="./images/nav3.png" alt=""><p>Friend</p></a></li>
            <li><a><img src="./images/nav4.png" alt=""><p>MobilePay</p></a></li>
            <li><a><img src="./images/nav5.png" alt=""><p>Cash</p></a></li>
            <li><a><img src="./images/nav6.png" alt=""><p>Coupon</p></a></li>
            <li><a><img src="./images/nav7.png" alt=""><p>Heart</p></a></li>
        </ul>
    </nav>

    <!--the mainbody of the mainpage-->
    <main class="jd_main">
        <section class="jd_product">

            <div class="jd_product_title no_border clearfix">

                <div class="f_left">
                    <span class="sk_icon"></span>
                    <span class="sk_name">QuickSale</span>
                    <div class="sk_time">
                        <span>0</span>
                        <span>0</span>
                        <span>:</span>
                        <span>0</span>
                        <span>0</span>
                        <span>:</span>
                        <span>0</span>
                        <span>0</span>
                    </div>
                </div>
                <div class="f_right">
                    <a class="sk_more" href="#">More</a>
                </div>

            </div>
            <div class="jd_product_content">
                <ul class="sk_product clearfix">
                    <li>
                        <a href="#"><img src="./images/detail01.jpg" alt=""></a>
                        <p class="sk_price">$30.00</p>
                        <p class="sk_price">$10.00</p>
                    </li>
                    <li>
                        <a href="#"><img src="./images/detail02.jpg" alt=""></a>
                        <p class="sk_price">$30.00</p>
                        <p class="sk_price">$10.00</p>
                    </li>
                    <li>
                        <a href="#"><img src="./images/detail01.jpg" alt=""></a>
                        <p class="sk_price">$30.00</p>
                        <p class="sk_price">$10.00</p>
                    </li>
                </ul>
            </div>

        </section>

        <section class="jd_product">
            <div class="jd_product_title">
                <h3>JD SuperMarket</h3>
            </div>
            <div class="jd_product_content clearfix">
                <a class="w_50 f_left b_right" href="#"><img src="./images/cp1.jpg" alt=""></a>
                <a class="w_50 f_right b_bottom" href="#"><img src="./images/cp2.jpg" alt=""></a>
                <a class="w_50 f_right" href="#"><img src="./images/cp3.jpg" alt=""></a>
            </div>
        </section>

        <section class="jd_product clearfix">
            <a class="w_50 f_right b_left" href="#"><img src="./images/cp4.jpg" alt=""></a>
            <a class="w_50 f_left b_bottom" href="#"><img src="./images/cp5.jpg" alt=""></a>
            <a class="w_50 f_left" href="#"><img src="./images/cp6.jpg" alt=""></a>
        </section>

        <section class="jd_product clearfix">
            <a class="w_50 f_right b_left" href="#"><img src="./images/cp1.jpg" alt=""></a>
            <a class="w_50 f_left b_bottom" href="#"><img src="./images/cp2.jpg" alt=""></a>
            <a class="w_50 f_left" href="#"><img src="./images/cp3.jpg" alt=""></a>
        </section>
    </main>

</div>

<script src="./js/zepto.min.js"></script>

<!--引入select, 扩展的模块-->
<script src="./js/zepto/selector.js"></script>

<!--引入动画模块-->
<script src="./js/zepto/fx.js"></script>

<!--引入触摸模块-->
<script src="./js/zepto/touch.js"></script>
<script>

    /*
    * 页面加载完成执行
    *
    * */

    $(function () {
//        获取banner
        var $banner = $('.jd_banner');

//        图片盒子
//        var $imageBox = $banner.find('ul:nth-child(1)');
        var $imageBox = $banner.find('ul:eq(0)'); // 加入扩展选择器后

//        点盒子
//        var $pointBox = $banner.find('ul:nth-child(2)');
        var $pointBox = $banner.find('ul:eq(1)');

//        console.log($imageBox);
//        console.log($pointBox);

//        取到宽度
        var width = $banner.width();
//        console.log(width);

        var animateFunc = function (callback) {
            $imageBox.animate({'transform': "translateX(-" +index*width + "px)"}, 200, 'ease', function () {

                if (index >= 9) {
                    index = 1;
                    $imageBox.css({'transform': "translateX(-" +index*width + "px)"});
                } else if (index <= 0) {
                    index = 8;
                    $imageBox.css({'transform': "translateX(-" +index*width + "px)"});
                }

                $pointBox.find('li').removeClass('now').eq(index-1).addClass('now');

//                动画结束，后加入定时器
                callback && callback()

            });
        };


//        索引
        var index = 1;
        var timer = setInterval(function () {
            index++;
//            动画
            animateFunc();
        }, 2000);


//        绑定左划事件
        $imageBox.on('swipeLeft', function () {
            clearInterval(timer);
            index++;
            animateFunc(function () {

//                动画结束
                timer = setInterval(function () {
                    index++;
//            动画
                    animateFunc();
                }, 2000);

            });
        });
//        绑定右划事件
        $imageBox.on('swipeRight', function () {
            clearInterval(timer);
            index--;
            animateFunc(function () {
                timer = setInterval(function () {
                    index++;
//            动画
                    animateFunc();
                }, 2000);
            });
        });
    });

</script>
</body>
</html>
































